const { PrismaClient } = require('@prisma/client')
const prisma = new PrismaClient()

async function seedFunds() {
  console.log('üå± Seeding funds data...')

  // –°–æ–∑–¥–∞–µ–º —Ñ–æ–Ω–¥—ã
  const fundsSalesData = {
    name: '–§–æ–Ω–¥ –æ—Ç–¥–µ–ª–∞ –ø—Ä–æ–¥–∞–∂',
    description: '–§–æ–Ω–¥ –¥–ª—è –ø–æ–∫—Ä—ã—Ç–∏—è —Ä–∞—Å—Ö–æ–¥–æ–≤ –æ—Ç–¥–µ–ª–∞ –ø—Ä–æ–¥–∞–∂ –∏ –º–æ—Ç–∏–≤–∞—Ü–∏–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤',
    fundType: 'SALES',
    totalAmount: 5000000,
    allocatedAmount: 0,
    remainingAmount: 5000000,
    status: 'ACTIVE',
    startDate: new Date('2025-01-01'),
    endDate: new Date('2025-12-31'),
    isActive: true
  }

  const fundsProductionData = {
    name: '–§–æ–Ω–¥ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞',
    description: '–§–æ–Ω–¥ –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω–æ–π –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ —Ä–∞–∑–≤–∏—Ç–∏—è',
    fundType: 'PRODUCTION',
    totalAmount: 8500000,
    allocatedAmount: 0,
    remainingAmount: 8500000,
    status: 'ACTIVE',
    startDate: new Date('2025-01-01'),
    endDate: new Date('2025-12-31'),
    isActive: true
  }

  // –°–æ–∑–¥–∞–µ–º —Ñ–æ–Ω–¥ –ø—Ä–æ–¥–∞–∂
  const salesFund = await prisma.fund.create({
    data: {
      ...fundsSalesData,
      categories: {
        create: [
          {
            name: '–§–æ–Ω–¥ –æ—Ç–¥–µ–ª–∞ –ø—Ä–æ–¥–∞–∂',
            categoryType: 'EXPENSE',
            plannedAmount: 663000,
            actualAmount: 0,
            percentage: 13.26,
            description: '–†–∞—Å—Ö–æ–¥—ã –Ω–∞ –æ—Ç–¥–µ–ª –ø—Ä–æ–¥–∞–∂',
            priority: 1,
            items: {
              create: [
                {
                  name: '–ü–µ—Ç—Ä–æ–≤ –°.–†. –º–µ–Ω–µ–¥–∂–µ—Ä',
                  itemType: 'SALARY',
                  amount: 33000,
                  currency: 'RUB',
                  description: '–ó–∞—Ä–ø–ª–∞—Ç–∞ –º–µ–Ω–µ–¥–∂–µ—Ä–∞',
                  isRecurring: true,
                  priority: 1
                },
                {
                  name: '–ò—Å–ª–∞–º–æ–≤–∞ –ú. –º–µ–Ω–µ–¥–∂–µ—Ä',
                  itemType: 'SALARY',
                  amount: 60000,
                  currency: 'RUB',
                  description: '–ó–∞—Ä–ø–ª–∞—Ç–∞ –º–µ–Ω–µ–¥–∂–µ—Ä–∞',
                  isRecurring: true,
                  priority: 2
                },
                {
                  name: '–ú–æ—Ö–Ω–µ–≤–∞ –†. –º–µ–Ω–µ–¥–∂–µ—Ä',
                  itemType: 'SALARY',
                  amount: 91000,
                  currency: 'RUB',
                  description: '–ó–∞—Ä–ø–ª–∞—Ç–∞ –º–µ–Ω–µ–¥–∂–µ—Ä–∞',
                  isRecurring: true,
                  priority: 3
                },
                {
                  name: '–¶—ã–±—É–ª—å—Å–∫–∞—è –ê. –º–µ–Ω–µ–¥–∂–µ—Ä',
                  itemType: 'SALARY',
                  amount: 79000,
                  currency: 'RUB',
                  description: '–ó–∞—Ä–ø–ª–∞—Ç–∞ –º–µ–Ω–µ–¥–∂–µ—Ä–∞',
                  isRecurring: true,
                  priority: 4
                },
                {
                  name: '–ë–∏—Ç—é–∫ –ú. –æ—Ñ–∏—Å-–º–µ–Ω–µ–¥–∂–µ—Ä',
                  itemType: 'SALARY',
                  amount: 60000,
                  currency: 'RUB',
                  description: '–ó–∞—Ä–ø–ª–∞—Ç–∞ –æ—Ñ–∏—Å-–º–µ–Ω–µ–¥–∂–µ—Ä–∞',
                  isRecurring: true,
                  priority: 5
                }
              ]
            }
          },
          {
            name: '–§–æ–Ω–¥ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞',
            categoryType: 'EXPENSE',
            plannedAmount: 1093800,
            actualAmount: 0,
            percentage: 21.88,
            description: '–†–∞—Å—Ö–æ–¥—ã –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ',
            priority: 2,
            items: {
              create: [
                {
                  name: '–õ–∏—Ç–≤–∏–Ω–æ–≤ –ù–ü–û/–º–æ–Ω—Ç–∞–∂–Ω–∏–∫',
                  itemType: 'SALARY',
                  amount: 74000,
                  currency: 'RUB',
                  description: '–ó–∞—Ä–ø–ª–∞—Ç–∞ –ù–ü–û/–º–æ–Ω—Ç–∞–∂–Ω–∏–∫–∞',
                  isRecurring: true,
                  priority: 1
                },
                {
                  name: '–ë—É—à–∞ –ö–ª–∞–¥–æ–≤—â–∏–∫-–∑–∞–∫—É–ø—â–∏–∫',
                  itemType: 'SALARY',
                  amount: 40000,
                  currency: 'RUB',
                  description: '–ó–∞—Ä–ø–ª–∞—Ç–∞ –∫–ª–∞–¥–æ–≤—â–∏–∫–∞-–∑–∞–∫—É–ø—â–∏–∫–∞',
                  isRecurring: true,
                  priority: 2
                },
                {
                  name: '–ì–æ—Ä–±—É–Ω–æ–≤ –í–æ–¥–∏—Ç-–º–æ–Ω—Ç–∞–∂–Ω–∏–∫',
                  itemType: 'SALARY',
                  amount: 79300,
                  currency: 'RUB',
                  description: '–ó–∞—Ä–ø–ª–∞—Ç–∞ –≤–æ–¥–∏—Ç–µ–ª—è-–º–æ–Ω—Ç–∞–∂–Ω–∏–∫–∞',
                  isRecurring: true,
                  priority: 3
                },
                {
                  name: '–¢–æ–ª–æ–±–∞–µ–≤ —Å–ª–µ—Å–∞—Ä—å-–º–æ–Ω—Ç–∞–∂–Ω–∏–∫',
                  itemType: 'SALARY',
                  amount: 69000,
                  currency: 'RUB',
                  description: '–ó–∞—Ä–ø–ª–∞—Ç–∞ —Å–ª–µ—Å–∞—Ä—è-–º–æ–Ω—Ç–∞–∂–Ω–∏–∫–∞',
                  isRecurring: true,
                  priority: 4
                }
              ]
            }
          }
        ]
      }
    }
  })

  // –°–æ–∑–¥–∞–µ–º —Ñ–æ–Ω–¥ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞
  const productionFund = await prisma.fund.create({
    data: {
      ...fundsProductionData,
      categories: {
        create: [
          {
            name: '–§–æ–Ω–¥ —Å—ã—Ä—å—è',
            categoryType: 'EXPENSE',
            plannedAmount: 850000,
            actualAmount: 0,
            percentage: 17.0,
            description: '–†–∞—Å—Ö–æ–¥—ã –Ω–∞ —Å—ã—Ä—å–µ –∏ –º–∞—Ç–µ—Ä–∏–∞–ª—ã',
            priority: 1,
            items: {
              create: [
                {
                  name: '–°—ã—Ä—å—ë –Ω–∞ –±–∞–∑–µ',
                  itemType: 'EXPENSE',
                  amount: 850000,
                  currency: 'RUB',
                  description: '–ó–∞–∫—É–ø–∫–∞ —Å—ã—Ä—å—è –∏ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤',
                  isRecurring: false,
                  priority: 1
                }
              ]
            }
          },
          {
            name: '–ù–∞–ª–æ–≥–∏',
            categoryType: 'EXPENSE',
            plannedAmount: 8000,
            actualAmount: 0,
            percentage: 8.0,
            description: '–ù–∞–ª–æ–≥–æ–≤—ã–µ —Ä–∞—Å—Ö–æ–¥—ã',
            priority: 2,
            items: {
              create: [
                {
                  name: '–ù–î–°',
                  itemType: 'OTHER',
                  amount: 8000,
                  currency: 'RUB',
                  description: '–ù–∞–ª–æ–≥ –Ω–∞ –¥–æ–±–∞–≤–ª–µ–Ω–Ω—É—é —Å—Ç–æ–∏–º–æ—Å—Ç—å',
                  isRecurring: true,
                  priority: 1
                }
              ]
            }
          },
          {
            name: '–ü–æ—Å—Ç–æ—è–Ω–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã',
            categoryType: 'EXPENSE',
            plannedAmount: 369450,
            actualAmount: 0,
            percentage: 7.39,
            description: '–ü–æ—Å—Ç–æ—è–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã',
            priority: 3,
            items: {
              create: [
                {
                  name: '–ê—Ä–µ–Ω–¥–∞ –æ—Ñ–∏—Å–∞',
                  itemType: 'EXPENSE',
                  amount: 88000,
                  currency: 'RUB',
                  description: '–ê—Ä–µ–Ω–¥–∞ –æ—Ñ–∏—Å–Ω–æ–≥–æ –ø–æ–º–µ—â–µ–Ω–∏—è',
                  isRecurring: true,
                  priority: 1
                },
                {
                  name: '–ê—Ä–µ–Ω–¥–∞ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞',
                  itemType: 'EXPENSE',
                  amount: 88000,
                  currency: 'RUB',
                  description: '–ê—Ä–µ–Ω–¥–∞ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –ø–æ–º–µ—â–µ–Ω–∏—è',
                  isRecurring: true,
                  priority: 2
                },
                {
                  name: '–¢–µ–ª–µ—Ñ–æ–Ω–∏—è',
                  itemType: 'EXPENSE',
                  amount: 10000,
                  currency: 'RUB',
                  description: '–¢–µ–ª–µ—Ñ–æ–Ω–Ω–∞—è —Å–≤—è–∑—å',
                  isRecurring: true,
                  priority: 3
                },
                {
                  name: '–ò–Ω—Ç–µ—Ä–Ω–µ—Ç',
                  itemType: 'EXPENSE',
                  amount: 10000,
                  currency: 'RUB',
                  description: '–ò–Ω—Ç–µ—Ä–Ω–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ',
                  isRecurring: true,
                  priority: 4
                },
                {
                  name: '–û—Ñ–∏—Å–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã',
                  itemType: 'EXPENSE',
                  amount: 7000,
                  currency: 'RUB',
                  description: '–ö–∞–Ω—Ü–µ–ª—è—Ä–∏—è –∏ –æ—Ñ–∏—Å–Ω—ã–µ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç–∏',
                  isRecurring: true,
                  priority: 5
                }
              ]
            }
          }
        ]
      }
    }
  })

  console.log(`‚úÖ Created ${2} funds with categories and items`)

  // –°–æ–∑–¥–∞–µ–º —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
  await prisma.fundTransaction.createMany({
    data: [
      {
        fundId: salesFund.id,
        transactionType: 'INCOME',
        amount: 5000000,
        currency: 'RUB',
        description: '–ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–µ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ–æ–Ω–¥–∞ –ø—Ä–æ–¥–∞–∂',
        status: 'COMPLETED',
        transactionDate: new Date('2025-01-01')
      },
      {
        fundId: productionFund.id,
        transactionType: 'INCOME',
        amount: 8500000,
        currency: 'RUB',
        description: '–ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–µ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ–æ–Ω–¥–∞ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞',
        status: 'COMPLETED',
        transactionDate: new Date('2025-01-01')
      },
      {
        fundId: salesFund.id,
        transactionType: 'EXPENSE',
        amount: 33000,
        currency: 'RUB',
        description: '–í—ã–ø–ª–∞—Ç–∞ –∑–∞—Ä–ø–ª–∞—Ç—ã –ü–µ—Ç—Ä–æ–≤—É –°.–†.',
        status: 'COMPLETED',
        transactionDate: new Date('2025-07-01')
      }
    ]
  })

  console.log(`‚úÖ Created sample fund transactions`)
}

// –ó–∞–ø—É—Å–∫–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é –µ—Å–ª–∏ —ç—Ç–æ—Ç —Ñ–∞–π–ª –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é
if (require.main === module) {
  seedFunds()
    .catch((e) => {
      console.error('‚ùå Error seeding funds:', e)
      process.exit(1)
    })
    .finally(async () => {
      await prisma.$disconnect()
    })
}

module.exports = { seedFunds }
